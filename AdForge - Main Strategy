<!DOCTYPE html>
<html lang="pl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdForge OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Chosen Palette: Sophisticated Neutral -->
    <!-- Application Structure Plan: A comprehensive single-page dashboard layout. A fixed sidebar provides primary navigation between core modules: Dashboard, Strategia, System (The Playbook), Operacje, a now fully functional 'Akademia' for training, and Baza Wiedzy. This structure separates high-level strategy, detailed processes, day-to-day operations, and structured learning paths, creating a clear information hierarchy. The goal is a central hub for all company activities, from daily tasks to long-term skill development. -->
    <!-- Visualization & Content Choices: Data is visualized through interactive charts (Chart.js) on the dashboard. Processes are shown as interactive diagrams (HTML/CSS) linked to tables. The 'Akademia' section now features detailed, clickable learning paths presented in modals. The 'Operacje' and 'System' sections include actionable checklists and detailed deliverable templates. This multi-faceted approach addresses the user's need for a tool that is both a reference and a training platform. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        :root {
            --bg-main: #f4f4f5; /* zinc-100 */
            --bg-sidebar: #e4e4e7; /* zinc-200 */
            --bg-card: #ffffff;
            --text-primary: #18181b; /* zinc-900 */
            --text-secondary: #52525b; /* zinc-600 */
            --border-color: #d4d4d8; /* zinc-300 */
            --accent-primary: #a16207; /* amber-700 */
            --accent-secondary: #fefce8; /* yellow-50 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
        }
        .sidebar {
            background-color: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
        }
        .nav-link {
            color: var(--text-secondary);
            transition: all 0.2s ease-in-out;
        }
        .nav-link:hover {
            background-color: #d4d4d8;
            color: var(--text-primary);
        }
        .nav-link.active {
            background-color: var(--bg-card);
            color: var(--text-primary);
            font-weight: 600;
            box-shadow: -2px 0 0 0 var(--accent-primary) inset;
        }
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgba(0,0,0,0.03), 0 1px 2px -1px rgba(0,0,0,0.03);
            transition: box-shadow 0.2s;
        }
        .card:hover { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05); }
        .kanban-column { min-height: 400px; }
        .kanban-card { cursor: pointer; }
        .diagram-node, .table-row { transition: background-color 0.2s ease-in-out; }
        .diagram-node.highlighted, .table-row.highlighted { background-color: var(--accent-secondary); border-color: var(--accent-primary); }
        .diagram-connector { flex-grow: 1; height: 2px; background-color: var(--border-color); position: relative; }
        .diagram-connector::after { content: ''; position: absolute; right: -1px; top: -4px; border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-left: 7px solid var(--border-color); }
        .accordion-button.open .accordion-arrow { transform: rotate(90deg); }
        .accordion-arrow { transition: transform 0.2s; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-in-out; }
        .framework-content ul { list-style-position: inside; }
        .framework-content ul li { margin-left: 1rem; }
        .framework-content ul ul li { margin-left: 2rem; }
        .framework-content h4 { font-weight: 700; margin-top: 1.25rem; margin-bottom: 0.5rem; color: var(--text-primary); }
        .framework-content h5 { font-weight: 600; margin-top: 1rem; color: var(--text-secondary); }
        .framework-content p { margin-bottom: 0.75rem; }
        .framework-content pre { background-color: #f3f4f6; padding: 1rem; border-radius: 0.5rem; white-space: pre-wrap; word-wrap: break-word; font-size: 0.875rem; }
        .progress-bar-bg { background-color: #e4e4e7; }
        .progress-bar { background-color: var(--accent-primary); transition: width 0.5s ease-in-out; }
        .checklist-item input:checked + span { text-decoration: line-through; color: #71717a; }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="antialiased">

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="sidebar w-64 flex-shrink-0 hidden md:flex flex-col justify-between p-4 sticky top-0">
            <div>
                <div class="px-4 mb-8">
                    <h1 class="text-2xl font-extrabold text-gray-800">AdForge OS</h1>
                    <p class="text-xs text-gray-500">Zintegrowany System Operacyjny</p>
                </div>
                <nav id="main-nav" class="space-y-2">
                    <a href="#dashboard" class="nav-link active group flex items-center px-4 py-2.5 rounded-lg">
                        <span class="w-6 h-6 mr-3">üìä</span> Strona G≈Ç√≥wna
                    </a>
                    <a href="#strategia" class="nav-link group flex items-center px-4 py-2.5 rounded-lg">
                        <span class="w-6 h-6 mr-3">üéØ</span> Strategia
                    </a>
                    <a href="#system" class="nav-link group flex items-center px-4 py-2.5 rounded-lg">
                        <span class="w-6 h-6 mr-3">‚öôÔ∏è</span> System (Playbook)
                    </a>
                    <a href="#operacje" class="nav-link group flex items-center px-4 py-2.5 rounded-lg">
                        <span class="w-6 h-6 mr-3">üöÄ</span> Operacje i SOPs
                    </a>
                    <a href="#akademia" class="nav-link group flex items-center px-4 py-2.5 rounded-lg">
                        <span class="w-6 h-6 mr-3">üéì</span> Akademia AdForge
                    </a>
                    <a href="#wiedza" class="nav-link group flex items-center px-4 py-2.5 rounded-lg">
                        <span class="w-6 h-6 mr-3">üìö</span> Baza Wiedzy
                    </a>
                </nav>
            </div>
            <div class="px-4 text-center">
                <p class="text-xs text-gray-500">Wersja: Lipiec 2025</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-4 sm:p-6 md:p-10">
            <div id="content-container">
                
                <!-- Dashboard Section -->
                <section id="dashboard" class="content-section active">
                    <h1 class="text-4xl font-bold mb-2">Dashboard</h1>
                    <p class="text-lg text-gray-500 mb-8">PrzeglƒÖd kluczowych wska≈∫nik√≥w i statusu operacyjnego.</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <div class="card p-6">
                            <h3 class="font-semibold text-gray-800">MRR (Monthly Recurring Revenue)</h3>
                            <p class="text-3xl font-bold">150,000 PLN</p>
                            <p class="text-sm text-green-600">+12% vs poprzedni miesiƒÖc</p>
                            <div class="chart-container mt-4 h-48 max-h-[200px]"><canvas id="mrrChart"></canvas></div>
                        </div>
                        <div class="card p-6">
                            <h3 class="font-semibold text-gray-800">Retencja Klient√≥w (Roczna)</h3>
                            <p class="text-3xl font-bold">92%</p>
                            <p class="text-sm text-gray-500">Cel: >90%</p>
                            <div class="chart-container mt-4 h-48 max-h-[200px]"><canvas id="retentionChart"></canvas></div>
                        </div>
                        <div class="card p-6">
                            <h3 class="font-semibold text-gray-800">Lejek Sprzeda≈ºowy (Q2)</h3>
                            <p class="text-3xl font-bold">5 Klient√≥w</p>
                            <p class="text-sm text-gray-500">Konwersja Audyt -> Klient: 45%</p>
                            <div class="chart-container mt-4 h-48 max-h-[200px]"><canvas id="funnelChart"></canvas></div>
                        </div>
                    </div>

                    <h2 class="text-2xl font-bold mb-4">Tablica Statusu Klient√≥w</h2>
                    <div id="kanban-board" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                        <!-- Kanban columns will be injected by JS -->
                    </div>
                </section>

                <!-- Strategia Section -->
                <section id="strategia" class="content-section">
                    <h1 class="text-4xl font-bold mb-2">Strategia AdForge</h1>
                    <p class="text-lg text-gray-500 mb-8">Nasz system operacyjny: Kim jeste≈õmy, jak dzia≈Çamy i dokƒÖd zmierzamy.</p>

                    <div class="space-y-10">
                        <!-- Sekcja 1: Esencja AdForge -->
                        <div class="card p-8">
                            <h2 class="text-2xl font-bold mb-4 border-b pb-2">SEKCJA 1: ESENCJA ADFORGE</h2>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="font-semibold text-lg mb-2">Kim Jeste≈õmy</h3>
                                    <p class="text-gray-600">Strategicznym partnerem transformacji rentowno≈õci dla ambitnych firm e-commerce. NIE JESTE≈öMY kolejnƒÖ agencjƒÖ PPC/CRO. Jeste≈õmy strategicznymi konsultantami i partnerami biznesowymi.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg mb-2">Pozycjonowanie</h3>
                                    <p class="text-gray-600">Agencja premium/butikowa, selektywny "Brutalnie Szczery Doradca Biznesowy" dla e-commerce. Tworzymy w≈ÇasnƒÖ kategoriƒô.</p>
                                </div>
                                <div class="lg:col-span-2">
                                     <h3 class="font-semibold text-lg mb-2">Nasza "Brutalna Prawda"</h3>
                                     <p class="text-gray-600 italic bg-amber-50 p-4 rounded-lg border-l-4 border-amber-400">"Tw√≥j problem e-commerce nie le≈ºy w reklamach ‚Äì le≈ºy w wadliwych fundamentach Twojego modelu biznesowego. My to diagnozujemy i pomagamy naprawiƒá. M√≥wimy prawdƒô o Twoim biznesie, kt√≥rej nikt inny nie ma odwagi wypowiedzieƒá, bo tylko ona prowadzi do trwa≈Çej rentowno≈õci."</p>
                                </div>
                                <div class="lg:col-span-2">
                                    <h3 class="font-semibold text-lg mb-2">Kluczowe Wyr√≥≈ºniki ("Trzy Filary Prawdziwej Przewagi")</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div class="border p-4 rounded-lg">
                                            <h4 class="font-bold">Dog≈Çƒôbna Analiza Fundament√≥w</h4>
                                            <p class="text-sm text-gray-600">Analizujemy rentowno≈õƒá ka≈ºdego produktu. Challengujemy fundamentalne za≈Ço≈ºenia Twojego biznesu, szukajƒÖc ukrytego potencja≈Çu i miejsc, gdzie ucieka mar≈ºa.</p>
                                        </div>
                                        <div class="border p-4 rounded-lg">
                                            <h4 class="font-bold">Strategiczne My≈õlenie Inwestycyjne</h4>
                                            <p class="text-sm text-gray-600">Traktujemy marketing jak inwestycjƒô w ZYSK, nie koszt. Priorytetyzujemy dzia≈Çania o najwiƒôkszym potencjalnym wp≈Çywie na mar≈ºƒô.</p>
                                        </div>
                                        <div class="border p-4 rounded-lg">
                                            <h4 class="font-bold">Selektywne Partnerstwo i Szczero≈õƒá</h4>
                                            <p class="text-sm text-gray-600">Pracujemy z max. 5 nowymi klientami na kwarta≈Ç. Komunikujemy siƒô bezpo≈õrednio i bez ogr√≥dek.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sekcja 3: Idealny Klient (ICP) -->
                        <div class="card p-8">
                            <h2 class="text-2xl font-bold mb-4 border-b pb-2">SEKCJA 2: IDEALNY KLIENT (ICP)</h2>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="font-semibold text-lg mb-2">Profil Firmy</h3>
                                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                                        <li><strong>Typ:</strong> E-commerce (preferowane marki w≈Çasne/DTC).</li>
                                        <li><strong>Obr√≥t Roczny:</strong> 1-20M PLN (preferowany 3.5M-10M PLN).</li>
                                        <li><strong>Status:</strong> OsiƒÖgnƒôli plateau wzrostu lub majƒÖ problemy z rentowno≈õciƒÖ.</li>
                                    </ul>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg mb-2">Profil Decydenta</h3>
                                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                                        <li><strong>Osoba:</strong> W≈Ça≈õciciel/CEO.</li>
                                        <li><strong>Mentalno≈õƒá:</strong> Gotowy na niewygodnƒÖ prawdƒô, otwarty na zmiany, my≈õli jak inwestor.</li>
                                        <li><strong>Potrzeba:</strong> Szuka partnera do transformacji, a nie wykonawcy reklam.</li>
                                    </ul>
                                </div>
                                <div class="lg:col-span-2 bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                                    <h3 class="font-semibold text-lg mb-2 text-red-800">Kogo NIE Obs≈Çugujemy (Czerwone Flagi)</h3>
                                    <ul class="list-disc list-inside text-red-700 space-y-1">
                                        <li>Firmy szukajƒÖce tylko "lepszych/ta≈Ñszych reklam" bez chƒôci zmian w biznesie.</li>
                                        <li>Niegotowi na transparentno≈õƒá i kwestionowanie za≈Ço≈ºe≈Ñ.</li>
                                        <li>Skupieni tylko na kr√≥tkoterminowych metrykach vanity (np. niski CPC, wysoki ROAS bez kontekstu mar≈ºy).</li>
                                        <li>Startupy bez walidacji rynkowej i z fundamentalnie nieop≈Çacalnym modelem.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sekcja 4: Cele Strategiczne -->
                        <div class="card p-8">
                             <h2 class="text-2xl font-bold mb-4 border-b pb-2">SEKCJA 3: CELE STRATEGICZNE I KPIs</h2>
                             <div class="space-y-4">
                                <div>
                                    <h3 class="font-semibold text-lg mb-1">BHAG (Big Hairy Audacious Goal)</h3>
                                    <p class="text-gray-600">Staƒá siƒô najskuteczniejszƒÖ agencjƒÖ transformacji e-commerce w Polsce do 2026 roku.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg mb-1">Cele na Koniec 2025</h3>
                                    <p class="text-gray-600"><strong>Finansowe:</strong> MRR 150k PLN, Mar≈ºa operacyjna >25%. <br><strong>Operacyjne:</strong> Max. 25 aktywnych klient√≥w, wdro≈ºony system operacyjny, zbudowany elitarny core team (2-3 osoby).</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg mb-1">Kluczowe Metryki Sukcesu (KPIs)</h3>
                                    <p class="text-gray-600"><strong>Dla Klient√≥w:</strong> Wzrost MAR≈ªY BRUTTO, Poprawa LTV:CAC, Wzrost ZYSKU Operacyjnego. <br><strong>Dla AdForge:</strong> MRR, Mar≈ºa Operacyjna, Konwersja (Audyt -> Retainer) >30%, Retencja >85%.</p>
                                </div>
                             </div>
                        </div>

                    </div>
                </section>

                <!-- System Section -->
                <section id="system" class="content-section">
                    <!-- Content will be injected by JS -->
                </section>

                <!-- Operacje Section -->
                <section id="operacje" class="content-section">
                    <h1 class="text-4xl font-bold mb-2">Operacje i SOPs</h1>
                    <p class="text-lg text-gray-500 mb-8">Standardowe Procedury Operacyjne (SOPs) i checklisty do codziennej pracy.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="card p-6">
                            <h3 class="text-lg font-bold mb-3">SOP: Kwalifikacja Leada</h3>
                            <p class="text-xs text-gray-500 mb-4">Cel: Odrzuciƒá 60% lead√≥w, kt√≥re nie pasujƒÖ do ICP.</p>
                            <ul class="text-sm space-y-3">
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Wype≈Çnienie ankiety kwalifikacyjnej</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Weryfikacja kryteri√≥w (przych√≥d, bud≈ºet)</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Sprawdzenie "Czerwonych Flag"</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Scoping Call (15 min) z decydentem</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Decyzja: GO/NO-GO dla Etapu Audytu</span></li>
                            </ul>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-lg font-bold mb-3">SOP: Business Intelligence Audit</h3>
                            <p class="text-xs text-gray-500 mb-4">Cel: Dostarczyƒá klientowi "efekt WOW" i jasnƒÖ diagnozƒô.</p>
                            <ul class="text-sm space-y-3">
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Zebranie dostƒôp√≥w technicznych i biznesowych</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Przeprowadzenie wywiad√≥w ze stakeholderami</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Analiza MECE (Traffic, Conversion, Profit, Attr)</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Synteza wniosk√≥w i przygotowanie raportu</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Prezentacja Checkpoint 1</span></li>
                            </ul>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-lg font-bold mb-3">SOP: Raport Miesiƒôczny (MBR)</h3>
                             <p class="text-xs text-gray-500 mb-4">Cel: Pokazaƒá postƒôp w kontek≈õcie cel√≥w biznesowych.</p>
                            <ul class="text-sm space-y-3">
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Zebranie danych z Looker Studio</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Analiza wynik√≥w vs cele (KPIs)</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Identyfikacja 3 "wins" i 3 "learnings"</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Przygotowanie rekomendacji na kolejny miesiƒÖc</span></li>
                                <li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3"><span>Wys≈Çanie raportu i um√≥wienie MBR</span></li>
                            </ul>
                        </div>
                    </div>
                </section>
                
                <!-- Akademia Section -->
                <section id="akademia" class="content-section">
                    <h1 class="text-4xl font-bold mb-2">Akademia AdForge</h1>
                    <p class="text-lg text-gray-500 mb-8">≈öcie≈ºki rozwoju kompetencji "od zera do eksperta" dla ka≈ºdej roli w zespole.</p>

                    <div id="akademia-container" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Academy paths will be injected by JS -->
                    </div>
                </section>

                <!-- Wiedza Section -->
                <section id="wiedza" class="content-section">
                    <h1 class="text-4xl font-bold mb-2">Baza Wiedzy</h1>
                    <p class="text-lg text-gray-500 mb-8">Nasze frameworki i kluczowe koncepcje. To jest spos√≥b my≈õlenia AdForge.</p>
                    <div id="accordion-container" class="space-y-4">
                        <!-- Accordion items will be injected by JS -->
                    </div>
                </section>

            </div>
        </main>
    </div>

    <!-- Modal Structure -->
    <div id="akademia-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-8 transform scale-95">
            <div id="modal-header" class="flex justify-between items-center border-b pb-3 mb-4">
                 <h2 id="modal-title" class="text-2xl font-bold"></h2>
                 <button id="modal-close" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-body"></div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            function navigateTo(hash) {
                const targetId = hash.substring(1);
                
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === hash);
                });

                contentSections.forEach(section => {
                    section.classList.toggle('active', section.id === targetId);
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetHash = this.getAttribute('href');
                    navigateTo(targetHash);
                    window.location.hash = targetHash;
                });
            });

            // Initial setup
            function initializeApp() {
                const initialHash = window.location.hash || '#dashboard';
                navigateTo(initialHash);
    
                injectPlaybookHTML();
                buildPlaybook();
                buildKanbanBoard();
                buildAccordion();
                buildAkademia();
                buildCharts();
            }

            initializeApp();
        });
        
        function injectPlaybookHTML() {
             const playbookContainer = document.getElementById('system');
             if (playbookContainer) {
                const playbookHTML = `
                    <h1 class="text-4xl font-bold mb-2">AdForge Performance & Profit System‚Ñ¢</h1>
                    <p class="text-lg text-gray-500 mb-8">Nasz autorski, 5-etapowy system transformacji rentowno≈õci e-commerce.</p>
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <nav id="playbook-nav" class="flex flex-wrap gap-2 border-b border-gray-200 pb-2 mb-4">
                            <!-- Playbook nav links -->
                        </nav>
                        <div id="playbook-content">
                            <!-- Playbook content -->
                        </div>
                    </div>
                `;
                playbookContainer.innerHTML = playbookHTML;
             }
        }

        function buildPlaybook() {
            const playbookNav = document.getElementById('playbook-nav');
            const playbookContent = document.getElementById('playbook-content');

            if (!playbookNav || !playbookContent) return;

            const playbookData = [
                { id: 'etap-1', title: 'Etap 1: Audyt' },
                { id: 'etap-2', title: 'Etap 2: Architektura' },
                { id: 'etap-3', title: 'Etap 3: Optymalizacja' },
                { id: 'etap-4', title: 'Etap 4: Zysk' },
                { id: 'etap-5', title: 'Etap 5: Skalowanie' }
            ];

            const playbookContentData = {
                'etap-1': {
                    title: 'Etap 1: Business Intelligence Audit', subtitle: 'Diagnoza Systemu',
                    goal: 'Zidentyfikowaƒá najwiƒôksze d≈∫wignie wzrostu i "przecieki" w bud≈ºecie klienta poprzez brutalnie szczerƒÖ, opartƒÖ na danych diagnozƒô czterech kluczowych obszar√≥w jego biznesu. Naszym celem nie jest audyt reklam. Naszym celem jest audyt rentowno≈õci.',
                    diagramNodes: ['Kick-off & Dostƒôp', 'Analiza Danych', 'MECE Breakdown', 'Synteza i Hipotezy', 'Raport Audytu', 'Checkpoint 1'],
                    steps: [
                        { step: '1', action: 'Kick-off & Zbieranie Dostƒôp√≥w', responsible: 'Account Manager', tools: 'ClickUp (checklist), KeePass', question: 'Czy mamy wszystkie dostƒôpy? Czy klient rozumie, czego potrzebujemy?' },
                        { step: '2', action: 'Analiza Rentowno≈õci', responsible: 'Performance Specialist', tools: 'GA, CRM, Google Sheets', question: 'Gdzie jest najwy≈ºsza/najni≈ºsza mar≈ºa? Jaki jest LTV:CAC dla kluczowych segment√≥w?' },
                        { step: '3', action: 'Analiza Ruchu', responsible: 'Performance Specialist', tools: 'Google/Meta Ads, Ahrefs, GA', question: 'Kt√≥re kana≈Çy przynoszƒÖ rentowny ruch? Gdzie przepalamy bud≈ºet? Co robi konkurencja?' },
                        { step: '4', action: 'Analiza Konwersji', responsible: 'CRO Analyst', tools: 'Hotjar, GA, PageSpeed', question: 'Gdzie u≈ºytkownicy odpadajƒÖ z lejka? Jakie elementy na stronie zabijajƒÖ konwersjƒô?' },
                        { step: '5', action: 'Analiza Analityki', responsible: 'CRO Analyst', tools: 'GA, Google Tag Manager', question: 'Czy dane sƒÖ wiarygodne? Czy ≈õledzimy to, co najwa≈ºniejsze (ZYSK)? Jaki jest model atrybucji?' },
                        { step: '6', action: 'Synteza i Hipotezy', responsible: 'CEO/Strateg, Zesp√≥≈Ç', tools: 'Miro/FigJam', question: 'Jakie sƒÖ 3 najwiƒôksze problemy do rozwiƒÖzania? Jaka jest nasza g≈Ç√≥wna hipoteza na szybki wzrost?' },
                        { step: '7', action: 'Raport i Prezentacja', responsible: 'Account Manager, Zesp√≥≈Ç', tools: 'Google Slides, Looker Studio', question: 'Deliverable: Raport Audytu Biznesowego, Prezentacja na Checkpoint 1.' },
                        { step: '8', action: 'Checkpoint 1', responsible: 'CEO/Strateg, Account Manager', tools: 'Google Meet', question: 'Czy klient zgadza siƒô z naszƒÖ diagnozƒÖ? Czy akceptuje nasze hipotezy? Czy jeste≈õmy gotowi na Etap 2?' }
                    ],
                    deliverable: {
                        title: "Struktura Deliverable: Raport Audytu Biznesowego",
                        content: `<ul class="list-disc space-y-1 text-sm"><li><strong>Streszczenie dla ZarzƒÖdu (1 strona):</strong> G≈Ç√≥wne wnioski i 3 kluczowe rekomendacje.</li><li><strong>Analiza MECE:</strong> Szczeg√≥≈Çowe wyniki dla obszar√≥w Traffic, Conversion, Profitability, Attribution.</li><li><strong>Macierz Szans:</strong> Ocena potencjalnego wp≈Çywu i ≈Çatwo≈õci wdro≈ºenia dla ka≈ºdej rekomendacji.</li><li><strong>Roadmapa na 90 dni:</strong> Proponowane dzia≈Çania w ramach Etapu 2 i 3.</li></ul>`
                    },
                    checklist: [
                        "Potwierdzenie zebrania wszystkich dostƒôp√≥w (AM)",
                        "Przeprowadzenie wywiad√≥w ze wszystkimi zdefiniowanymi stakeholderami (PS)",
                        "Wype≈Çnienie szablonu analizy MECE w Google Sheets (PS, CRO)",
                        "Stworzenie draftu raportu i prezentacji (AM)",
                        "Wewnƒôtrzny review raportu (CEO)",
                        "Wys≈Çanie agendy spotkania do klienta na 24h przed Checkpointem (AM)"
                    ]
                },
                'etap-2': {
                    title: 'Etap 2: Performance Architecture Design', subtitle: 'Projekt Systemu',
                    goal: 'Przekszta≈Çciƒá wnioski z audytu w konkretny, sp√≥jny i mierzalny plan dzia≈Çania. Zaprojektowaƒá architekturƒô kampanii, kt√≥ra odzwierciedla cele biznesowe klienta, a nie tylko "dobre praktyki" Google.',
                    diagramNodes: ['Wyniki Audytu', 'Warsztat Strategiczny', 'Projekt Struktury', 'Definicja Segment√≥w', 'Plan Bud≈ºetu', 'Framework KPI', 'Dokument Architektury', 'Checkpoint 2'],
                    steps: [
                        { step: '1', action: 'Warsztat Strategiczny', responsible: 'CEO/Strateg, Zesp√≥≈Ç', tools: 'Miro/FigJam', question: 'Jakie sƒÖ nasze priorytety? Na kt√≥rych produktach/segmentach siƒô skupiamy?' },
                        { step: '2', action: 'Projekt Struktury Kampanii', responsible: 'Performance Specialist', tools: 'Google Sheets, XMind', question: 'Jak struktura kampanii odzwierciedli rentowno≈õƒá produkt√≥w? Jakie kampanie uruchomimy?' },
                        { step: '3', action: 'Definicja Segment√≥w', responsible: 'Performance Specialist', tools: 'GA, CRM Klienta', question: 'Jakie sƒÖ nasze kluczowe persony? Jakie nowe segmenty (remarketing, lookalike) zbudujemy?' },
                        { step: '4', action: 'Plan Bud≈ºetu', responsible: 'CEO/Strateg, Performance Specialist', tools: 'Google Sheets', question: 'Jak podzielimy bud≈ºet miƒôdzy kana≈Çy? Jakie sƒÖ prognozowane wyniki?' },
                        { step: '5', action: 'Framework KPI', responsible: 'Account Manager, Performance Specialist', tools: 'Looker Studio, Google Sheets', question: 'Co bƒôdziemy mierzyƒá? Jak bƒôdzie wyglƒÖda≈Ç nasz dashboard? Jakie KPI sƒÖ kluczowe dla klienta?' },
                        { step: '6', action: 'Dokument "Performance Architecture"', responsible: 'Account Manager, Zesp√≥≈Ç', tools: 'Google Docs', question: 'Deliverable: Dokument "Performance Architecture" z roadmapƒÖ na 3 miesiƒÖce.' },
                        { step: '7', action: 'Checkpoint 2', responsible: 'CEO/Strateg, Account Manager', tools: 'Google Meet', question: 'Czy klient rozumie i akceptuje plan? Czy mamy zielone ≈õwiat≈Ço na wdro≈ºenie?' }
                    ],
                    deliverable: {
                        title: "Struktura Deliverable: Dokument 'Performance Architecture'",
                        content: `<ul class="list-disc space-y-1 text-sm"><li><strong>Strategia Kana≈Ç√≥w:</strong> Rola i cel dla Google Ads, Meta Ads, etc.</li><li><strong>Struktura Kampanii:</strong> Szczeg√≥≈Çowy blueprint dla ka≈ºdego kana≈Çu (np. kampanie brand, non-brand, PMAX, remarketing).</li><li><strong>Framework Targetowania:</strong> Definicja g≈Ç√≥wnych grup docelowych, strategii wyklucze≈Ñ i lejk√≥w.</li><li><strong>Roadmapa Wdro≈ºenia:</strong> Harmonogram uruchamiania poszczeg√≥lnych kampanii i dzia≈Ça≈Ñ na najbli≈ºsze 3 miesiƒÖce.</li></ul>`
                    },
                    checklist: [
                        "Zorganizowanie i podsumowanie warsztatu strategicznego (AM)",
                        "Stworzenie draftu struktury kampanii w XMind (PS)",
                        "Opracowanie propozycji podzia≈Çu bud≈ºetu (CEO, PS)",
                        "Przygotowanie dokumentu 'Performance Architecture' wg szablonu (AM)",
                        "Wewnƒôtrzne zatwierdzenie architektury przed spotkaniem z klientem (CEO)"
                    ]
                },
                'etap-3': {
                    title: 'Etap 3: Conversion Optimization Framework', subtitle: 'Optymalizacja Silnika',
                    goal: 'Systematyczne i iteracyjne zwiƒôkszanie wsp√≥≈Çczynnika konwersji poprzez testowanie hipotez opartych na danych. Celem nie sƒÖ "≈Çadniejsze" strony. Celem sƒÖ strony, kt√≥re sprzedajƒÖ wiƒôcej.',
                    diagramNodes: ['Dane & Analiza', 'Identyfikacja Hipotez', 'Priorytetyzacja', 'Projekt & Wdro≈ºenie Testu', 'Monitoring', 'Wynik', 'Wdro≈ºenie na sta≈Çe', 'Analiza i nowa hipoteza', 'Checkpoint 3'],
                    steps: [
                        { step: '1', action: 'Identyfikacja Hipotez', responsible: 'CRO Analyst', tools: 'Hotjar, GA4, Wyniki Audytu', question: 'Gdzie jest najwiƒôkszy potencja≈Ç do poprawy? Co najbardziej frustruje u≈ºytkownik√≥w?' },
                        { step: '2', action: 'Priorytetyzacja', responsible: 'CRO Analyst, Zesp√≥≈Ç', tools: 'Google Sheets (szablon PIE/ICE)', question: 'Kt√≥ry test ma najwiƒôkszy potencjalny wp≈Çyw (Potential), jest najwa≈ºniejszy (Importance) i naj≈Çatwiejszy do wdro≈ºenia (Ease)?' },
                        { step: '3', action: 'Projekt i Wdro≈ºenie Testu', responsible: 'CRO Analyst', tools: 'Google Optimize/VWO, Figma', question: 'Jak bƒôdzie wyglƒÖdaƒá wariant B? Czy test jest poprawnie skonfigurowany technicznie?' },
                        { step: '4', action: 'Monitoring', responsible: 'CRO Analyst', tools: 'Platforma do test√≥w A/B, GA4', question: 'Czy zbieramy wystarczajƒÖco du≈ºo danych? Czy wyniki sƒÖ istotne statystycznie?' },
                        { step: '5', action: 'Analiza i Wdro≈ºenie', responsible: 'CRO Analyst, Performance Specialist', tools: 'Google Sheets', question: 'Czego nauczyli≈õmy siƒô z tego testu? Jak wdra≈ºamy zwyciƒôskƒÖ wersjƒô?' },
                        { step: '6', action: 'Checkpoint 3', responsible: 'Account Manager, CRO Analyst', tools: 'Google Meet', question: 'Deliverable: Plan Test√≥w A/B na kwarta≈Ç. Czy klient rozumie proces i akceptuje plan?' }
                    ],
                    deliverable: {
                        title: "Struktura Deliverable: Plan Test√≥w A/B (Roadmapa CRO)",
                        content: `<ul class="list-disc space-y-1 text-sm"><li><strong>Lista Spriorytetyzowanych Hipotez:</strong> Tabela z hipotezami, ich ocenƒÖ PIE/ICE i statusem.</li><li><strong>Opis Testu 1:</strong> Szczeg√≥≈Çowy opis pierwszego testu (hipoteza, metryki, warianty, czas trwania).</li><li><strong>Harmonogram Test√≥w na Kwarta≈Ç:</strong> Planowana kolejno≈õƒá i czas trwania kolejnych eksperyment√≥w.</li></ul>`
                    },
                    checklist: [
                        "Analiza nagra≈Ñ sesji i heatmap z Hotjar (CRO)",
                        "Stworzenie listy min. 10 hipotez testowych (CRO)",
                        "Wsp√≥lna sesja priorytetyzacji hipotez z zespo≈Çem (CRO, PS)",
                        "Przygotowanie briefu dla dewelopera/grafika (je≈õli potrzebne) (CRO)",
                        "Konfiguracja i QA pierwszego testu A/B (CRO)"
                    ]
                },
                'etap-4': {
                    title: 'Etap 4: Profit Maximization Protocol', subtitle: 'Maksymalizacja Zysku',
                    goal: 'Wyj≈õƒá poza optymalizacjƒô kampanii i konwersji. Skupiƒá siƒô na maksymalizacji ca≈Çkowitego zysku generowanego przez klienta w czasie (LTV).',
                    diagramNodes: ['Analiza Danych', 'Segmentacja LTV', 'Projekt Strategii Retencji', 'Wdro≈ºenie Dzia≈Ça≈Ñ', 'Analiza Wp≈Çywu', 'Checkpoint 4'],
                    steps: [
                         { step: '1', action: 'Analiza i Segmentacja LTV', responsible: 'Performance Specialist', tools: 'CRM Klienta, GA4, Google Sheets', question: 'Kt√≥rzy klienci sƒÖ najbardziej warto≈õciowi? Co ich charakteryzuje?' },
                         { step: '2', action: 'Strategia Retencji', responsible: 'CEO/Strateg, Performance Specialist', tools: 'Miro/FigJam', question: 'Jak mo≈ºemy zwiƒôkszyƒá czƒôstotliwo≈õƒá zakup√≥w? Jak mo≈ºemy zwiƒôkszyƒá ≈õredniƒÖ warto≈õƒá zam√≥wienia?' },
                         { step: '3', action: 'Wdro≈ºenie Dzia≈Ça≈Ñ', responsible: 'Performance Specialist, Zewnƒôtrzny Partner (Email)', tools: 'Klaviyo/Mailchimp, Google Ads', question: 'Czy automatyzacje email dzia≈ÇajƒÖ poprawnie? Czy segmenty remarketingowe sƒÖ dobrze zdefiniowane?' },
                         { step: '4', action: 'Analiza Wp≈Çywu', responsible: 'Performance Specialist', tools: 'Looker Studio, GA4', question: 'Czy LTV ro≈õnie? Czy mar≈ºa na powracajƒÖcych klientach jest wy≈ºsza?' },
                         { step: '5', action: 'Checkpoint 4', responsible: 'CEO/Strateg, Account Manager', tools: 'Google Meet', question: 'Deliverable: Raport z wdro≈ºonych dzia≈Ça≈Ñ LTV. Czy klient widzi warto≈õƒá w tych dzia≈Çaniach?' }
                    ],
                    deliverable: {
                        title: "Struktura Deliverable: Raport Dzia≈Ça≈Ñ Rentowno≈õciowych",
                        content: `<ul class="list-disc space-y-1 text-sm"><li><strong>Analiza Kohortowa LTV:</strong> Por√≥wnanie warto≈õci klient√≥w w czasie.</li><li><strong>Wyniki Wdro≈ºonych Dzia≈Ça≈Ñ:</strong> Efektywno≈õƒá automatyzacji email, program√≥w lojalno≈õciowych etc.</li><li><strong>Rekomendacje:</strong> Dalsze kroki w celu maksymalizacji LTV i mar≈ºy.</li></ul>`
                    },
                    checklist: [
                        "Ekstrakcja i analiza danych o kohortach klient√≥w (PS)",
                        "Zaprojektowanie min. 2 automatyzacji email marketingowych (PS)",
                        "Stworzenie dedykowanych list remarketingowych dla segment√≥w LTV (PS)",
                        "Analiza wp≈Çywu wdro≈ºonych dzia≈Ça≈Ñ po 30 dniach (PS)",
                        "Przygotowanie prezentacji na Checkpoint 4 (AM)"
                    ]
                },
                'etap-5': {
                    title: 'Etap 5: Systematic Scale & Monitor', subtitle: 'Skalowanie Systemu',
                    goal: 'Przej≈õƒá od optymalizacji do inteligentnego, rentownego wzrostu. Skalowaƒá to, co dzia≈Ça, i systematycznie raportowaƒá postƒôpy w kontek≈õcie cel√≥w biznesowych.',
                    diagramNodes: ['Monitoring KPI', 'Alerty & Anomalie', 'Identyfikacja Okazji', 'Skalowanie', 'QBR', 'Aktualizacja Strategii'],
                    steps: [
                        { step: '1', action: 'CiƒÖg≈Çy Monitoring', responsible: 'Performance Specialist, Account Manager', tools: 'Looker Studio, Slack (alerty)', question: 'Czy kluczowe KPI sƒÖ w normie? Czy pojawi≈Çy siƒô jakie≈õ niepokojƒÖce trendy?' },
                        { step: '2', action: 'Protoko≈Çy Skalowania', responsible: 'Performance Specialist', tools: 'Google Ads, Meta Ads', question: 'Kt√≥re kampanie/produkty kwalifikujƒÖ siƒô do zwiƒôkszenia bud≈ºetu? O ile i jak szybko zwiƒôkszamy wydatki?' },
                        { step: '3', action: 'Przygotowanie QBR', responsible: 'Account Manager, Zesp√≥≈Ç', tools: 'Looker Studio, Google Slides', question: 'Jakie by≈Çy nasze najwiƒôksze sukcesy i pora≈ºki w kwartale? Jakie wnioski na przysz≈Ço≈õƒá?' },
                        { step: '4', action: 'Checkpoint 5 (QBR)', responsible: 'CEO/Strateg, Account Manager, Klient', tools: 'Google Meet', question: 'Deliverable: Raport QBR, Plan na kolejny kwarta≈Ç. Czy jeste≈õmy zgodni co do priorytet√≥w?' },
                        { step: '5', action: 'Aktualizacja Strategii', responsible: 'CEO/Strateg, Zesp√≥≈Ç', tools: 'Dokument "Performance Architecture"', question: 'Jakie zmiany wprowadzamy do naszej architektury na podstawie wynik√≥w z ostatniego kwarta≈Çu?' }
                    ],
                    deliverable: {
                        title: "Struktura Deliverable: Raport Kwartalny (QBR)",
                        content: `<ul class="list-disc space-y-1 text-sm"><li><strong>Podsumowanie Wynik√≥w Kwarta≈Çu:</strong> Por√≥wnanie z celami i poprzednim kwarta≈Çem.</li><li><strong>Analiza Strategic Initiatives:</strong> Co zadzia≈Ça≈Ço, a co nie? Czego siƒô nauczyli≈õmy?</li><li><strong>Plan Strategiczny na Kolejny Kwarta≈Ç:</strong> G≈Ç√≥wne cele, priorytety i alokacja bud≈ºetu.</li></ul>`
                    },
                    checklist: [
                        "CiƒÖg≈Çe monitorowanie dashboardu i alert√≥w (PS, AM)",
                        "Stosowanie protoko≈Çu skalowania dla kampanii oznaczonych jako 'zwyciƒôzcy' (PS)",
                        "Zebranie danych i przygotowanie draftu QBR na tydzie≈Ñ przed ko≈Ñcem kwarta≈Çu (AM)",
                        "Wewnƒôtrzne spotkanie w celu om√≥wienia QBR i planu na kolejny kwarta≈Ç (Ca≈Çy Zesp√≥≈Ç)",
                        "Wys≈Çanie raportu i agendy do klienta na 48h przed QBR (AM)"
                    ]
                }
            };

            playbookData.forEach((stage, index) => {
                const button = document.createElement('button');
                button.textContent = stage.title;
                button.className = `playbook-nav-btn px-4 py-2 text-sm font-semibold rounded-md transition-colors ${index === 0 ? 'bg-amber-100 text-amber-800' : 'text-gray-600 hover:bg-gray-100'}`;
                button.dataset.target = stage.id;
                playbookNav.appendChild(button);
            });

            function renderPlaybookStage(stageId) {
                const stage = playbookContentData[stageId];
                if (!stage) return;
                
                let diagramHTML = '<div class="flex items-center w-full mb-8 flex-wrap">';
                stage.diagramNodes.forEach((node, i) => {
                    diagramHTML += `<div data-step="${i+1}" class="diagram-node text-center p-2 rounded-md bg-gray-50 border border-gray-200 shadow-sm flex-shrink-0 min-w-[120px]"><span class="text-xs font-semibold">${node}</span></div>`;
                    if (i < stage.diagramNodes.length - 1) {
                        diagramHTML += '<div class="diagram-connector mx-2"></div>';
                    }
                });
                diagramHTML += '</div>';

                let tableHTML = `
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="py-3 px-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-12">Krok</th>
                                    <th class="py-3 px-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Dzia≈Çanie</th>
                                    <th class="py-3 px-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Odpowiedzialny</th>
                                    <th class="py-3 px-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Narzƒôdzia</th>
                                    <th class="py-3 px-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Kluczowe Pytania</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                `;
                stage.steps.forEach(step => {
                    tableHTML += `<tr class="table-row" data-step="${step.step}"><td class="py-4 px-4 font-bold text-gray-500 text-center">${step.step}</td><td class="py-4 px-4 font-semibold text-gray-800">${step.action}</td><td class="py-4 px-4 text-sm text-gray-600">${step.responsible}</td><td class="py-4 px-4 text-sm text-gray-600">${step.tools}</td><td class="py-4 px-4 text-sm text-gray-600 italic">"${step.question}"</td></tr>`;
                });
                tableHTML += `</tbody></table></div>`;

                let deliverableHTML = `
                    <div class="mt-8 card p-6 bg-gray-50">
                        <h4 class="font-bold text-gray-800 mb-2">${stage.deliverable.title}</h4>
                        <div class="text-gray-600">${stage.deliverable.content}</div>
                    </div>
                `;

                let checklistHTML = `<div class="mt-8 card p-6"><h4 class="font-bold text-gray-800 mb-3">Operacyjna Checklista Etapu</h4><ul class="space-y-2">`;
                stage.checklist.forEach(item => {
                    checklistHTML += `<li class="checklist-item flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3 flex-shrink-0"><span>${item}</span></li>`;
                });
                checklistHTML += `</ul></div>`;


                playbookContent.innerHTML = `
                    <div class="fade-in">
                        <h2 class="text-3xl font-bold text-gray-900">${stage.title}</h2>
                        <p class="text-lg text-gray-500 mb-6">${stage.subtitle}</p>
                        <div class="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg mb-10"><p class="font-semibold text-amber-800">Cel Etapu:</p><p class="text-amber-700">${stage.goal}</p></div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Diagram Procesu</h3>
                        ${diagramHTML}
                        <h3 class="text-xl font-bold text-gray-800 mt-12 mb-4">Proces Krok po Kroku</h3>
                        ${tableHTML}
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            ${deliverableHTML}
                            ${checklistHTML}
                        </div>
                    </div>
                `;
                setupPlaybookInteractions();
            }

            playbookNav.addEventListener('click', (e) => {
                if(e.target.classList.contains('playbook-nav-btn')) {
                    playbookNav.querySelectorAll('.playbook-nav-btn').forEach(btn => {
                        btn.classList.remove('bg-amber-100', 'text-amber-800');
                        btn.classList.add('text-gray-600', 'hover:bg-gray-100');
                    });
                    e.target.classList.add('bg-amber-100', 'text-amber-800');
                    e.target.classList.remove('text-gray-600', 'hover:bg-gray-100');
                    renderPlaybookStage(e.target.dataset.target);
                }
            });

            renderPlaybookStage('etap-1');
        }

        function setupPlaybookInteractions() {
            const stageElement = document.getElementById('playbook-content');
            if (!stageElement) return;

            const diagramNodes = stageElement.querySelectorAll('.diagram-node');
            const tableRows = stageElement.querySelectorAll('.table-row');

            const highlightElements = (step, add) => {
                const method = add ? 'add' : 'remove';
                stageElement.querySelectorAll(`[data-step="${step}"]`).forEach(el => el.classList[method]('highlighted'));
            };
            
            diagramNodes.forEach(node => {
                const step = node.dataset.step;
                node.addEventListener('mouseover', () => highlightElements(step, true));
                node.addEventListener('mouseout', () => highlightElements(step, false));
            });

            tableRows.forEach(row => {
                const step = row.dataset.step;
                row.addEventListener('mouseover', () => highlightElements(step, true));
                row.addEventListener('mouseout', () => highlightElements(step, false));
            });
        }

        function buildKanbanBoard() {
            const kanbanContainer = document.getElementById('kanban-board');
            if (!kanbanContainer) return;
            const stages = [
                { title: 'Etap 1: Audyt', clients: ['Klient A', 'Klient B'] },
                { title: 'Etap 2: Architektura', clients: ['Klient C'] },
                { title: 'Etap 3: Optymalizacja', clients: ['Klient D', 'Klient E', 'Klient F'] },
                { title: 'Etap 4: Zysk', clients: ['Klient G'] },
                { title: 'Etap 5: Skalowanie', clients: ['Klient H', 'Klient I'] }
            ];
            let kanbanHTML = '';
            stages.forEach(stage => {
                kanbanHTML += `<div class="bg-gray-100 rounded-lg p-4 kanban-column"><h3 class="font-bold mb-4">${stage.title}</h3><div class="space-y-3">`;
                stage.clients.forEach(client => {
                    kanbanHTML += `<div class="card p-3 kanban-card">${client}</div>`;
                });
                kanbanHTML += `</div></div>`;
            });
            kanbanContainer.innerHTML = kanbanHTML;
        }
        
        function buildAccordion() {
            const accordionContainer = document.getElementById('accordion-container');
            if (!accordionContainer) return;

            const accordionData = [
                { 
                    title: 'Framework 1: MECE Problem Breakdown', 
                    content: `
                        <div class="framework-content">
                            <h4>Kiedy stosowaƒá?</h4>
                            <p>Na samym poczƒÖtku wsp√≥≈Çpracy (Etap 1: Audyt) oraz przy ka≈ºdej nowej, du≈ºej inicjatywie lub problemie. To nasz podstawowy spos√≥b na strukturyzacjƒô my≈õlenia i zapewnienie, ≈ºe o niczym nie zapomnieli≈õmy.</p>
                            <h4>Jak to wyglƒÖda w praktyce?</h4>
                            <p>Ka≈ºdy problem dzielimy na 4 niezale≈ºne, ale kompletne kategorie. To zmusza nas do holistycznego spojrzenia na biznes klienta, a nie tylko na kampanie reklamowe.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div class="border-l-2 border-red-500 pl-3">
                                    <h5>A. TRAFFIC ISSUES (Problemy z ruchem)</h5>
                                    <ul>
                                        <li>Volume: Za ma≈Ço ruchu na stronƒô</li>
                                        <li>Quality: Ruch niskiej jako≈õci (nie konwertuje)</li>
                                        <li>Sources: ≈πr√≥d≈Ça ruchu nieoptymalne</li>
                                        <li>Targeting: B≈Çƒôdne targetowanie audiences</li>
                                    </ul>
                                </div>
                                <div class="border-l-2 border-blue-500 pl-3">
                                    <h5>B. CONVERSION ISSUES (Problemy z konwersjƒÖ)</h5>
                                    <ul>
                                        <li>Landing Page: Strona nie konwertuje</li>
                                        <li>User Experience: Problemy z UX/UI</li>
                                        <li>Offer: Oferta nieatrakcyjna</li>
                                        <li>Trust Signals: Brak budowy zaufania</li>
                                    </ul>
                                </div>
                                <div class="border-l-2 border-green-500 pl-3">
                                    <h5>C. PROFITABILITY ISSUES (Problemy z rentowno≈õciƒÖ)</h5>
                                    <ul>
                                        <li>Unit Economics: Mar≈ºe za niskie</li>
                                        <li>Lifetime Value: LTV ni≈ºszy ni≈º CAC</li>
                                        <li>Cost Structure: Koszty za wysokie</li>
                                        <li>Pricing Strategy: B≈Çƒôdna strategia cenowa</li>
                                    </ul>
                                </div>
                                <div class="border-l-2 border-yellow-500 pl-3">
                                    <h5>D. ATTRIBUTION ISSUES (Problemy z pomiarem)</h5>
                                    <ul>
                                        <li>Tracking Setup: B≈Çƒôdne trackowanie</li>
                                        <li>Attribution Model: Niew≈Ça≈õciwy model atrybucji</li>
                                        <li>Data Analysis: B≈Çƒôdna interpretacja danych</li>
                                        <li>Reporting: Metryki nie pokazujƒÖ prawdy</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    ` 
                },
                { 
                    title: 'Framework 2: Issue Trees', 
                    content: `
                        <div class="framework-content">
                            <h4>Kiedy stosowaƒá?</h4>
                            <p>Gdy mamy zdefiniowany g≈Ç√≥wny problem lub cel (np. po analizie MECE) i chcemy rozbiƒá go na konkretne hipotezy i dzia≈Çania. U≈ºywamy go w Etapie 2 (Projekt Architektury) i przy planowaniu kwartalnym.</p>
                            <h4>Jak to wyglƒÖda w praktyce?</h4>
                            <p>Tworzymy logiczne drzewo, kt√≥re od og√≥lnego celu schodzi do bardzo konkretnych zada≈Ñ do wykonania. To zapewnia, ≈ºe nasze dzia≈Çania sƒÖ bezpo≈õrednio powiƒÖzane z celem strategicznym.</p>
                            <pre><code>G≈Å√ìWNE PYTANIE: "Jak zwiƒôkszyƒá zysk z performance marketingu o 100%?"
‚îî‚îÄ‚îÄ LEVEL 1: ZWIƒòKSZYƒÜ PRZYCHODY
    ‚îú‚îÄ‚îÄ LEVEL 2: Wiƒôcej konwersji
    ‚îÇ   ‚îú‚îÄ‚îÄ LEVEL 3: Lepsze Landing Pages
    ‚îÇ   ‚îî‚îÄ‚îÄ LEVEL 3: Lepsze targetowanie
    ‚îî‚îÄ‚îÄ LEVEL 2: Wy≈ºszy Average Order Value
        ‚îî‚îÄ‚îÄ LEVEL 3: Cross-sell/Up-sell
‚îî‚îÄ‚îÄ LEVEL 1: ZMNIEJSZYƒÜ KOSZTY
    ‚îú‚îÄ‚îÄ LEVEL 2: Ni≈ºszy Cost Per Click
    ‚îÇ   ‚îî‚îÄ‚îÄ LEVEL 3: Bid optimization
    ‚îî‚îÄ‚îÄ LEVEL 2: Lepsza konwersja kampanii
        ‚îî‚îÄ‚îÄ LEVEL 3: Waste elimination</code></pre>
                        </div>
                    `
                },
                {
                    title: 'Framework 3: AdForge Performance Profit System‚Ñ¢',
                    content: `
                        <div class="framework-content">
                            <h4>Kiedy stosowaƒá?</h4>
                            <p>To jest nasz nadrzƒôdny system operacyjny, kt√≥ry strukturyzuje CA≈ÅƒÑ wsp√≥≈Çpracƒô z klientem, od pierwszego kontaktu do ciƒÖg≈Çego skalowania. Ka≈ºdy klient przechodzi przez te 5 etap√≥w.</p>
                            <h4>Jak to wyglƒÖda w praktyce?</h4>
                            <p>To sekwencyjny proces, w kt√≥rym ka≈ºdy kolejny etap bazuje na wynikach poprzedniego. Zapewnia to sp√≥jno≈õƒá, przewidywalno≈õƒá i koncentracjƒô na celu ko≈Ñcowym, jakim jest ZYSK klienta. Szczeg√≥≈Çowy opis znajdziesz w sekcji "System (Playbook)".</p>
                            <ol class="list-decimal space-y-2 mt-4">
                                <li><strong>ETAP 1: BUSINESS INTELLIGENCE AUDIT</strong> (Diagnoza)</li>
                                <li><strong>ETAP 2: PERFORMANCE ARCHITECTURE DESIGN</strong> (Strategia)</li>
                                <li><strong>ETAP 3: CONVERSION OPTIMIZATION FRAMEWORK</strong> (Egzekucja)</li>
                                <li><strong>ETAP 4: PROFIT MAXIMIZATION PROTOCOL</strong> (D≈∫wignia)</li>
                                <li><strong>ETAP 5: SCALE & MONITOR SYSTEM</strong> (Wzrost)</li>
                            </ol>
                        </div>
                    `
                },
                { 
                    title: 'Framework 4: Hypothesis-Driven Testing', 
                    content: `
                        <div class="framework-content">
                            <h4>Kiedy stosowaƒá?</h4>
                            <p>Zawsze, gdy planujemy jakiekolwiek dzia≈Çanie optymalizacyjne ‚Äì od zmiany nag≈Ç√≥wka na stronie, po testowanie nowej grupy docelowej. To fundament naszej pracy w Etapie 3 (Optymalizacja).</p>
                            <h4>Jak to wyglƒÖda w praktyce?</h4>
                            <p>Zamiast dzia≈Çaƒá "na czuja", ka≈ºdƒÖ zmianƒô traktujemy jak eksperyment naukowy. Formu≈Çujemy hipotezƒô, okre≈õlamy, jak zmierzymy sukces i dopiero wtedy dzia≈Çamy. To eliminuje subiektywizm i pozwala uczyƒá siƒô z ka≈ºdego dzia≈Çania.</p>
                            <pre><code>HIPOTEZA: [Konkretne za≈Ço≈ºenie o przyczynie problemu]
RATIONALE: [Dlaczego tak my≈õlimy - dane/obserwacje]
TEST: [Jak to sprawdzimy - metodologia]
SUKCES METRIC: [Jak zmierzymy sukces - liczby]
TIMEFRAME: [Ile czasu na test]
RESOURCE ALLOCATION: [Ile bud≈ºetu/czasu potrzeba]</code></pre>
                            <h4 class="mt-6">Przyk≈Çad:</h4>
                            <pre><code>HIPOTEZA: Dodanie testimoniali na LP zwiƒôkszy konwersjƒô o 25%
RATIONALE: Brak trust signals w checkout flow, wysoki bounce rate
TEST: A/B test - wersja A bez testimoniali vs B z 3 testimonialami
SUKCES METRIC: Wzrost konwersji >15% przy stat. significance 95%
TIMEFRAME: 14 dni testowania
RESOURCE ALLOCATION: 2h setup, 50% traffic na ka≈ºdƒÖ wersjƒô</code></pre>
                        </div>
                    ` 
                },
                { 
                    title: 'Framework 5: Analiza 80/20 (Zasada Pareto)', 
                    content: `
                        <div class="framework-content">
                            <h4>Kiedy stosowaƒá?</h4>
                            <p>Regularnie, co najmniej raz w miesiƒÖcu, podczas analizy wynik√≥w kampanii i rentowno≈õci produkt√≥w. To narzƒôdzie do bezlitosnej priorytetyzacji.</p>
                            <h4>Jak to wyglƒÖda w praktyce?</h4>
                            <p>Identyfikujemy te 20% element√≥w (kampanii, produkt√≥w, s≈Ç√≥w kluczowych), kt√≥re generujƒÖ 80% wynik√≥w (zysku) oraz te 20%, kt√≥re generujƒÖ 80% problem√≥w (koszt√≥w). Nastƒôpnie dzia≈Çamy wed≈Çug prostego schematu.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h5>SILNIKI PRZYCHOD√ìW:</h5>
                                    <ul class="list-disc">
                                        <li>20% kampanii generuje 80% przychodu ‚Üí Skupienie na najlepszych</li>
                                        <li>20% s≈Ç√≥w kluczowych generuje 80% konwersji ‚Üí Optymalizacja s≈Ç√≥w kluczowych</li>
                                        <li>20% grup docelowych generuje 80% zyskownego ruchu ‚Üí Ekspansja grup docelowych</li>
                                        <li>20% produkt√≥w generuje 80% mar≈ºy ‚Üí Optymalizacja miksu produktowego</li>
                                    </ul>
                                </div>
                                <div>
                                    <h5>GENERATORY KOSZT√ìW:</h5>
                                    <ul class="list-disc">
                                        <li>20% kampanii zu≈ºywa 80% bud≈ºetu ‚Üí Realokacja bud≈ºetu</li>
                                        <li>20% s≈Ç√≥w kluczowych generuje 80% koszt√≥w ‚Üí Strategia wyklucze≈Ñ</li>
                                        <li>20% umiejscowie≈Ñ generuje 80% strat ‚Üí Optymalizacja umiejscowie≈Ñ</li>
                                        <li>20% okres√≥w czasowych generuje 80% nieefektywno≈õci ‚Üí Optymalizacja harmonogramu</li>
                                    </ul>
                                </div>
                            </div>
                            <h4 class="mt-6">Schemat Dzia≈Çania:</h4>
                            <ul class="list-decimal">
                                <li><strong>ELIMINUJ:</strong> Dolne 50% wynik√≥w (eliminacja strat)</li>
                                <li><strong>OPTYMALIZUJ:</strong> ≈örodkowe 30% wynik√≥w (potencja≈Ç do poprawy)</li>
                                <li><strong>SKALUJ:</strong> G√≥rne 20% wynik√≥w (koncentracja na wzro≈õcie)</li>
                            </ul>
                        </div>
                    ` 
                },
                 { 
                    title: 'Framework 6: McKinsey 7S dla AdForge', 
                    content: `
                        <div class="framework-content">
                            <h4>Kiedy stosowaƒá?</h4>
                            <p>To jest nasz **wewnƒôtrzny framework strategiczny**. U≈ºywamy go raz na p√≥≈Ç roku do audytu samej agencji AdForge, aby upewniƒá siƒô, ≈ºe nasza w≈Çasna organizacja jest sp√≥jna, efektywna i gotowa do realizacji obietnic sk≈Çadanych klientom. **To narzƒôdzie dla nas, nie dla klienta.**</p>
                            <h4>Jak to wyglƒÖda w praktyce?</h4>
                            <p>Analizujemy 7 kluczowych obszar√≥w naszej firmy, aby zidentyfikowaƒá niesp√≥jno≈õci. Na przyk≈Çad, je≈õli nasza strategia (Strategy) m√≥wi o byciu premium, ale nasze systemy (Systems) sƒÖ chaotyczne, a umiejƒôtno≈õci zespo≈Çu (Skills) nieadekwatne, to mamy problem do rozwiƒÖzania.</p>
                            <ul class="list-disc space-y-2">
                                <li><strong>STRATEGY (Strategia):</strong> Czy nasze pozycjonowanie premium jest sp√≥jne z naszymi dzia≈Çaniami?</li>
                                <li><strong>STRUCTURE (Struktura):</strong> Czy obecna struktura zespo≈Çu wspiera efektywnƒÖ obs≈Çugƒô klienta?</li>
                                <li><strong>SYSTEMS (Systemy):</strong> Czy nasze SOPs, narzƒôdzia i procesy sƒÖ wystarczajƒÖco dobre?</li>
                                <li><strong>SHARED VALUES (Wsp√≥lne Warto≈õci):</strong> Czy wszyscy w zespole ≈ºyjƒÖ naszƒÖ mantrƒÖ "zysk ponad metryki pr√≥≈ºno≈õci"?</li>
                                <li><strong>STYLE (Styl Przyw√≥dztwa):</strong> Czy styl zarzƒÖdzania wspiera kulturƒô odpowiedzialno≈õci i proaktywno≈õci?</li>
                                <li><strong>STAFF (Pracownicy):</strong> Czy mamy odpowiednich ludzi na pok≈Çadzie?</li>
                                <li><strong>SKILLS (Umiejƒôtno≈õci):</strong> Jakie kompetencje musimy rozwinƒÖƒá, aby byƒá o krok przed rynkiem?</li>
                            </ul>
                        </div>
                    `
                }
            ];

            let accordionHTML = '';
            accordionData.forEach(item => {
                accordionHTML += `
                    <div class="card">
                        <button class="accordion-button w-full flex justify-between items-center p-4 text-left">
                            <span class="font-semibold">${item.title}</span>
                            <span class="accordion-arrow transform transition-transform duration-200">‚ñ∂</span>
                        </button>
                        <div class="accordion-content px-4 pb-4">
                            ${item.content}
                        </div>
                    </div>
                `;
            });
            accordionContainer.innerHTML = accordionHTML;

            accordionContainer.addEventListener('click', (e) => {
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const content = button.nextElementSibling;
                    button.classList.toggle('open');
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                }
            });
        }
        
        function buildAkademia() {
            const container = document.getElementById('akademia-container');
            if (!container) return;

            const roles = [
                {
                    role: 'Performance Specialist',
                    description: 'Od egzekucji do strategii kampanii.',
                    levels: [
                        { level: 1, title: 'Foundation (40h)', goal: 'Zrozumienie framework√≥w AdForge i samodzielna obs≈Çuga podstawowych narzƒôdzi.', competencies: 'Analiza MECE, Google Ads Editor, podstawy GA4.', task: 'Przeprowad≈∫ audyt s≈Ç√≥w kluczowych dla klienta X wg. checklisty SOP.', progress: 100 },
                        { level: 2, title: 'Implementation (80h)', goal: 'Samodzielne prowadzenie kampanii i optymalizacja wg Systemu AdForge.', competencies: 'Budowa architektury kampanii, testy A/B reklam, analiza kohortowa.', task: 'Zaprojektuj i uruchom nowƒÖ architekturƒô kampanii dla klienta Y.', progress: 45 },
                        { level: 3, title: 'Strategy (120h)', goal: 'Projektowanie strategii performance i pe≈Çna odpowiedzialno≈õƒá za wyniki klienta.', competencies: 'Alokacja bud≈ºetu, prognozowanie, strategia skalowania, doradztwo biznesowe.', task: 'Przygotuj pe≈ÇnƒÖ strategiƒô na Q4 dla klienta Z, w≈ÇƒÖczajƒÖc QBR.', progress: 0 }
                    ]
                },
                {
                    role: 'CRO Analyst',
                    description: 'Od audytu UX do mistrzostwa w testach A/B.',
                    levels: [
                        { level: 1, title: 'Foundation (40h)', goal: 'Zrozumienie podstawowych narzƒôdzi i heurystyk konwersji.', competencies: 'Obs≈Çuga Hotjar, analiza ≈õcie≈ºek w GA4, audyt heurystyczny.', task: 'Przygotuj audyt UX dla strony g≈Ç√≥wnej klienta X.', progress: 100 },
                        { level: 2, title: 'Implementation (80h)', goal: 'Samodzielne planowanie, wdra≈ºanie i analiza test√≥w A/B.', competencies: 'Model PIE/ICE, konfiguracja test√≥w, analiza statystyczna.', task: 'Zaprojektuj i przeanalizuj test A/B dla strony produktu klienta Y.', progress: 20 },
                        { level: 3, title: 'Strategy (120h)', goal: 'Tworzenie d≈Çugoterminowych strategii optymalizacji konwersji.', competencies: 'Psychologia konwersji, mapowanie podr√≥≈ºy klienta, budowa roadmapy CRO.', task: 'Opracuj rocznƒÖ roadmapƒô CRO dla klienta Z.', progress: 0 }
                    ]
                },
                {
                    role: 'Account Manager',
                    description: 'Od koordynacji do strategicznego partnerstwa.',
                    levels: [
                        { level: 1, title: 'Foundation (40h)', goal: 'Pe≈Çne zrozumienie Systemu AdForge i narzƒôdzi do zarzƒÖdzania projektami.', competencies: 'ClickUp, komunikacja z klientem, podstawy raportowania.', task: 'Przygotuj i poprowad≈∫ wewnƒôtrzny kick-off dla nowego klienta.', progress: 100 },
                        { level: 2, title: 'Implementation (80h)', goal: 'Samodzielne prowadzenie komunikacji i zarzƒÖdzanie projektem klienta.', competencies: 'Prowadzenie MBR, zarzƒÖdzanie harmonogramem, podstawowa analiza danych.', task: 'Samodzielnie przygotuj i poprowad≈∫ MBR dla klienta Y.', progress: 65 },
                        { level: 3, title: 'Strategy (120h)', goal: 'Bycie strategicznym partnerem dla klienta, identyfikacja nowych mo≈ºliwo≈õci.', competencies: 'Doradztwo biznesowe, identyfikacja upsell, budowanie relacji na poziomie C-level.', task: 'Przygotuj i zaprezentuj propozycjƒô rozszerzenia wsp√≥≈Çpracy dla klienta Z.', progress: 0 }
                    ]
                }
            ];
            
            let html = '';
            roles.forEach(role => {
                html += `<div class="card p-6 flex flex-col">
                            <h3 class="text-xl font-bold mb-1">${role.role}</h3>
                            <p class="text-sm text-gray-500 mb-4">${role.description}</p>
                            <div class="space-y-3 flex-grow">`;
                role.levels.forEach(level => {
                    html += `<div class="border-l-4 ${level.progress > 0 ? 'border-amber-500' : 'border-gray-200'} pl-4 py-1 cursor-pointer hover:bg-gray-50 rounded-r-md" data-role="${role.role}" data-level="${level.level}">
                                <h4 class="font-semibold">${level.title}</h4>
                                <div class="w-full progress-bar-bg rounded-full h-1.5 mt-1">
                                    <div class="progress-bar h-1.5 rounded-full" style="width: ${level.progress}%"></div>
                                </div>
                             </div>`;
                });
                html += `</div></div>`;
            });
            container.innerHTML = html;

            // Modal Logic
            const modal = document.getElementById('akademia-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalClose = document.getElementById('modal-close');

            container.addEventListener('click', e => {
                const levelCard = e.target.closest('[data-level]');
                if (levelCard) {
                    const roleName = levelCard.dataset.role;
                    const levelNum = parseInt(levelCard.dataset.level);
                    const roleData = roles.find(r => r.role === roleName);
                    const levelData = roleData.levels.find(l => l.level === levelNum);

                    modalTitle.textContent = `${roleName} - ${levelData.title}`;
                    modalBody.innerHTML = `
                        <div class="space-y-4 text-gray-700">
                            <div><strong class="font-semibold text-gray-900">Cel Poziomu:</strong> ${levelData.goal}</div>
                            <div><strong class="font-semibold text-gray-900">Kluczowe Kompetencje:</strong>
                                <ul class="list-disc list-inside mt-1">
                                    ${levelData.competencies.split(', ').map(c => `<li>${c}</li>`).join('')}
                                </ul>
                            </div>
                            <div><strong class="font-semibold text-gray-900">Materia≈Çy Szkoleniowe:</strong>
                                <ul class="list-disc list-inside mt-1">
                                    <li><a href="#wiedza" class="text-blue-600 hover:underline">Frameworki z Bazy Wiedzy</a></li>
                                    <li><a href="#system" class="text-blue-600 hover:underline">Analiza Playbooka Operacyjnego</a></li>
                                </ul>
                            </div>
                            <div class="bg-amber-50 p-4 rounded-lg"><strong class="font-semibold text-amber-800">Zadanie Certyfikacyjne:</strong> ${levelData.task}</div>
                        </div>
                    `;
                    modal.classList.remove('hidden');
                }
            });

            modalClose.addEventListener('click', () => modal.classList.add('hidden'));
            modal.addEventListener('click', e => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        }

        function buildCharts() {
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: { enabled: true } },
                scales: { 
                    y: { beginAtZero: true, ticks: { font: { size: 10 } } },
                    x: { ticks: { font: { size: 10 } } }
                }
            };

            const mrrCanvas = document.getElementById('mrrChart');
            if (mrrCanvas) {
                new Chart(mrrCanvas, {
                    type: 'bar',
                    data: {
                        labels: ['Sty', 'Lut', 'Mar', 'Kwi', 'Maj', 'Cze'],
                        datasets: [{
                            label: 'MRR',
                            data: [95, 105, 110, 125, 134, 150].map(x => x*1000),
                            backgroundColor: 'rgba(161, 98, 7, 0.6)',
                            borderColor: 'rgba(161, 98, 7, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: chartOptions
                });
            }

            const retentionCanvas = document.getElementById('retentionChart');
            if (retentionCanvas) {
                new Chart(retentionCanvas, {
                    type: 'doughnut',
                    data: {
                        labels: ['Utrzymani', 'Utraceni'],
                        datasets: [{
                            data: [92, 8],
                            backgroundColor: ['#16a34a', '#e4e4e7'],
                            borderWidth: 0
                        }]
                    },
                    options: { ...chartOptions, cutout: '70%' }
                });
            }
            
            const funnelCanvas = document.getElementById('funnelChart');
            if (funnelCanvas) {
                new Chart(funnelCanvas, {
                    type: 'bar',
                    data: {
                        labels: ['Leady', 'Audyty', 'Klienci'],
                        datasets: [{
                            label: 'Lejek',
                            data: [22, 11, 5],
                            backgroundColor: ['#60a5fa', '#3b82f6', '#1d4ed8'],
                        }]
                    },
                    options: { ...chartOptions, indexAxis: 'y' }
                });
            }
        }

    </script>
</body>
</html>
